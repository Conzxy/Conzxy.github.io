<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Conzxy's blog</title><meta name="keywords" content="C++,network programming,distributed system"><meta name="author" content="Conzxy,1967933844@qq.com"><meta name="copyright" content="Conzxy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Conzxy&#39;s blog">
<meta property="og:url" content="https://conzxy.github.io/page/7/index.html">
<meta property="og:site_name" content="Conzxy&#39;s blog">
<meta property="og:description" content="blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png">
<meta property="article:author" content="Conzxy">
<meta property="article:tag" content="C++,network programming,distributed system">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png"><link rel="shortcut icon" href="https://s2.loli.net/2022/08/11/GzwcjJWagFYDrqA.png"><link rel="canonical" href="https://conzxy.github.io/page/7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"N9Z0PM0HJZ","apiKey":"6d906e58a3775dbc633767eedd5e917a","indexName":"conzxy_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Conzxy\'s blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-09-07 00:47:54'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/user.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">95</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">48</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw 首页"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw 归档"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw 标签"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw 分类"></i><span> 分类</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/shinku1.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Conzxy's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw 首页"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw 归档"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw 标签"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw 分类"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Conzxy's blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/Conzxy" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1967933844@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2020/07/19/Effective%20Cpp/item%202/" title="item 2:Prefer consts,enums,and inlines to"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="item 2:Prefer consts,enums,and inlines to"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/19/Effective%20Cpp/item%202/" title="item 2:Prefer consts,enums,and inlines to">item 2:Prefer consts,enums,and inlines to</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-19T06:38:28.379Z" title="发表于 2020-07-19 14:38:28">2020-07-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Effective-C/">Effective C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Effective-C/Accustoming-Yourself-to-C/">Accustoming Yourself to C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Effective-C/">Effective C++</a></span></div><div class="content">用consts、enums、inlines替代#definedefine是一个预处理指令，表示一个宏，它不被视为语言的一部分，这正是问题所在。
#define的问题1#define ASPECT_RATIO 1.653
我们要知道，记号ASPECT_RATIO可能未被编译器看到，或者在编译器处理源码之前就被预处理器移走，于是，该记号没有进入记号表（symbol table）。于是导致莫名奇妙的编译错误，错误信息可能会提示1.653，如果这个定义在别人的头文件中，那你是很难追踪的。当然，还可能出现在记号式调试器中，也是因为没有进入到记号表中。
用const代替#define解决上述问题的常见方法：1const double AspectRatio=1.653;作为语言常量，AspectRatio是肯定被编译器看到的。
const的特殊情况1.常量指针常量定义式通常放在头文件中①，因此有必要将指针声明为const。常量的char-based字符串1const char* const authorname=&quot;Scott Meyers&quot;;这个如何解读？写成`char con ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/07/19/Effective%20Cpp/item%201/" title="item 1:View C++ as a federation of language"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="item 1:View C++ as a federation of language"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/19/Effective%20Cpp/item%201/" title="item 1:View C++ as a federation of language">item 1:View C++ as a federation of language</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-19T06:23:50.050Z" title="发表于 2020-07-19 14:23:50">2020-07-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Effective-C/">Effective C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Effective-C/Accustoming-Yourself-to-C/">Accustoming Yourself to C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Effective-C/">Effective C++</a></span></div><div class="content">视C++为一个语言联邦C++最早只是C with Classes，C++经过不断的发展，Exception、template、STL，今日的C++已经是个多重范型编程语言，支持过程形式（procedural）、面向对象形式（object-oriented）、函数形式（functional、泛型形式（generic）、元编程形式（meta programming）。我们将C++看成一个语言联邦而不是单一语言，C++有如下四个次语言：

C
Object-Oriented C++
Template C++
STL

C++并不是带有一组守则的一体语言，而是每个次语言都有着自己的规约，而构成的联邦政府。
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/07/08/Effective%20Cpp/item%2010/" title="item 10:Have assignment operators return a reference to *this"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="item 10:Have assignment operators return a reference to *this"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/08/Effective%20Cpp/item%2010/" title="item 10:Have assignment operators return a reference to *this">item 10:Have assignment operators return a reference to *this</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-08T15:17:02.341Z" title="发表于 2020-07-08 23:17:02">2020-07-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Effective-C/">Effective C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Effective-C/">Effective C++</a></span></div><div class="content">令operator=返回一个reference to *this赋值运算符重载一般都是返回一个对*this的引用，这与资源管理优化及内置类型的要求是分不开的。
连锁赋值12int x,y,z;x=y=z=15; //连锁赋值
连锁赋值是采用右结合律的，即1x=(y=(z=15));为了实现连锁赋值实际上并不要求必须返回一个引用，我们返回值也是可行的。但是不是一个很好的主意。我们看下面这个例子：1234567891011121314151617181920212223242526272829303132333435#include &lt;iostream&gt;using namespace std;class A&#123;private:    int val;public:    A(int a=0):val(a)&#123;&#125;    A(const A &amp;a):val(a.val)    &#123;        cout&lt;&lt;&quot;constructor&quot;&lt;&lt;endl;    &#125;    A operator= ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/07/01/Effective%20Cpp/item%207/" title="item 7:Declare destructors virtual in polymorphic base classes"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="item 7:Declare destructors virtual in polymorphic base classes"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/07/01/Effective%20Cpp/item%207/" title="item 7:Declare destructors virtual in polymorphic base classes">item 7:Declare destructors virtual in polymorphic base classes</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-30T16:03:20.221Z" title="发表于 2020-07-01 00:03:20">2020-07-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Effective-C/">Effective C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Effective-C/">Effective C++</a></span></div><div class="content">多态基类应当声明virtual析构函数当继承体系中涉及动态分配对象时，设置一个基类virtual析构函数就显得很必要了。因为多态，我们在调用虚函数时根据绑定的真实类型选择合适的版本。调用非虚函数，则直接根据静态类型进行绑定，不能令动态类型和静态类型不一致（后面补充了一些细节）。再回到这上面来，析构函数是non-virtual，但我们用的是一个基类指针指向一个派生类对象，那么调用时就会调用基类的析构函数，那么派生类部分的析构呢？派生类部分并不会被析构，从而造成“局部销毁”现象，这很可能会导致内存泄漏以及给调试器添堵。所以你要知道C++编译器有明确要求：
当derived class对象经由一个base class指针被删除，而该base class带着一个non-virtual析构函数，其结果是未定义的。
要完整的删除基类指针指向的动态分配的派生类对象，只要将基类的析构函数声明为virtual即可，此时就会动态绑定派生类对象的析构函数，并沿着继承体系隐式调用基类部分的析构函数，直至完整销毁。
不含虚函数的类不需要virtual析构函数一个类如果不含虚函数，那么一般意味着它不是被用做一个基 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/06/27/Cpp/Scope/storage%20class%20specifiers/" title="存储类说明符"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="存储类说明符"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/27/Cpp/Scope/storage%20class%20specifiers/" title="存储类说明符">存储类说明符</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-27T14:21:49.630Z" title="发表于 2020-06-27 22:21:49">2020-06-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/declaration/">declaration</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/declaration/">declaration</a></span></div><div class="content">Storage class specifiers一个名字除了拥有它的作用域，还有两个重要性质：storage duration和linkage。
说明符种类存储类说明符可分为：

auto
register
static
extern
thread_local
mutable

auto C++11已经改变用法了（类型判断）。registerC++17已废除，线程暂不讨论（暂时还没了解(′д｀ )…彡…彡）。mutable对于存储期和链接属性都是无影响的。其作用本来也不是体现在这里。因此我们只讨论两个修饰符：




specifier
storage duration
linkage




static
static or thread
internal



extern
static or thread
external





storage duration把线程的存储期去掉，有三种存储期：

automatic
static
dynamic

automatic storage duration
automatic storage duration. The stora ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/06/27/Cpp/Scope/Scope%20Region/" title="C与C++的作用域"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C与C++的作用域"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/27/Cpp/Scope/Scope%20Region/" title="C与C++的作用域">C与C++的作用域</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-27T04:52:55.598Z" title="发表于 2020-06-27 12:52:55">2020-06-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/declaration/">declaration</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/declaration/">declaration</a></span></div><div class="content">Scope Region作用域这个概念不是C++特有的，而是由C继承过来的，但同时添加了C++专属的新作用域，我们先介绍C的作用域再引入C++的作用域。
Translation units在介绍C的作用域之前，要先了解什么叫做翻译单元（亦称编译单元：compilation units）。  

A C program consists of units called source files (or preprocessing files), which, in addition to source code, includes directives for the C preprocessor. A translation unit is the output of the C preprocessor – a source file after it has been preprocessed.

正如我们知道的，C（C++）程序是由多个源文件组成的，而源文件包括源代码和预处理指令，如#include指令和#define指令，而翻译单元正是一个源文件经过预处理器合并预处理指令和源代 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/06/25/Cpp/Name%20lookup/Unqualified%20name%20lookup/" title="非限定型查找"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="非限定型查找"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/25/Cpp/Name%20lookup/Unqualified%20name%20lookup/" title="非限定型查找">非限定型查找</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-25T02:09:49.501Z" title="发表于 2020-06-25 10:09:49">2020-06-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span></div><div class="content">Unqualified name lookup
Name lookup stops in the scope in which a name is found and it finds all declarations in that scope matching that name. It does not continue to look in enclosing scopes even when there could be better matching functions located there. Then there’s also ADL, which is a different matter.

非限定型查找分两个部分：OL（ordinary lookup）和ADL（Argument dependent lookup），OL会停在寻找到名字的那个作用域，同时将那个作用域的其他匹配名字加入查找集（注意，尽管进一步查找会有更好的也不会去查了），同时根据ADL的三个触发条件：

无类成员声明
无块作用域中的函数声明（using不算）
所有声明都是函数声明

全部条件都满足 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/06/25/Cpp/Name%20lookup/Template%20define/" title="模板的两段名字查找"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="模板的两段名字查找"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/25/Cpp/Name%20lookup/Template%20define/" title="模板的两段名字查找">模板的两段名字查找</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-25T02:09:49.499Z" title="发表于 2020-06-25 10:09:49">2020-06-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span></div><div class="content">Template的名字查找（OL and ADL）name lookup in template functionC++17 Standard said：

Such names are unbound and are looked up at the point of the template instantiation (17.6.4.1) in both the context of the template definition and the context of the point of instantiation.


模板的名字查找分两个阶段：定义阶段和实例化阶段

1.from the template definition: for non-dependent names2.during instantiation: from the definition but also, via ADL only, from the instantiation context

名字查找取决于该名字是否依赖于模板，即名字可分为dependent name 和non-depend ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2020/06/25/Cpp/Name%20lookup/ADL/" title="ADL"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ADL"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/25/Cpp/Name%20lookup/ADL/" title="ADL">ADL</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-25T02:09:49.496Z" title="发表于 2020-06-25 10:09:49">2020-06-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%90%8D%E5%AD%97%E6%9F%A5%E6%89%BE/">名字查找</a></span></div><div class="content">Argument dependent-name lookup
引入情景123456789101112131415161718namespace N&#123;  class X &#123;&#125;;  void f(X);  X&amp; operator++(X&amp;);&#125;int main()&#123;  // define an object of type X  N::X x;  // apply f to it  N::f(x);  // apply operator++ to it  ???&#125;

Of course you could have written N::operator++(x), but that would have defeated the whole point of operator overloading. Therefore a solution had to be found which allowed the compiler to find operator++(X&amp;) despite the fact ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2020/06/25/Cpp/Namespace/Using-directive/" title="Using指令"><img class="post_bg" src="/img/shinku1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Using指令"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/25/Cpp/Namespace/Using-directive/" title="Using指令">Using指令</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-25T02:07:46.701Z" title="发表于 2020-06-25 10:07:46">2020-06-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/namespace/">namespace</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/namespace/">namespace</a></span></div><div class="content">using指令概要A using-directive is a block-declaration（{/block/}）
作用
Using-directives are allowed only in namespace scope and in block scope. From the point of view of unqualified name lookup of any name after a using-directive and until the end of the scope in which it appears, every name from namespace-name is visible as if it were declared in the nearest enclosing namespace which contains both the using-directive and namespace-name.
using指令与声明区域Using-directive does not add any names to the declara ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/#content-inner">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/#content-inner">10</a><a class="extend next" rel="next" href="/page/8/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Conzxy</div><div class="author-info__description">blog</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">95</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">48</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Conzxy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Conzxy" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1967933844@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Cpper，最近对分布式系统、编译器设计感兴趣</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/06/distributed-system/lb_session_persistence/" title="讨论Load balancing中的session persistence"><img src="https://s2.loli.net/2022/09/07/sG7wyElXmgSb21e.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="讨论Load balancing中的session persistence"/></a><div class="content"><a class="title" href="/2022/09/06/distributed-system/lb_session_persistence/" title="讨论Load balancing中的session persistence">讨论Load balancing中的session persistence</a><time datetime="2022-09-06T13:44:50.994Z" title="发表于 2022-09-06 21:44:50">2022-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/04/Cpp/think/delete_incomplete/" title="delete 不完全类型对象"><img src="https://s2.loli.net/2022/09/07/XLMImfQKEkH51eO.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="delete 不完全类型对象"/></a><div class="content"><a class="title" href="/2022/09/04/Cpp/think/delete_incomplete/" title="delete 不完全类型对象">delete 不完全类型对象</a><time datetime="2022-09-04T01:52:08.786Z" title="发表于 2022-09-04 09:52:08">2022-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/02/distributed-system/protobuf_rpc_callback/" title="实现自己的Closure以使rpc的回调兼容所有可调用对象"><img src="https://s2.loli.net/2022/09/02/wQVD6FU5zjCyurE.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现自己的Closure以使rpc的回调兼容所有可调用对象"/></a><div class="content"><a class="title" href="/2022/09/02/distributed-system/protobuf_rpc_callback/" title="实现自己的Closure以使rpc的回调兼容所有可调用对象">实现自己的Closure以使rpc的回调兼容所有可调用对象</a><time datetime="2022-09-02T05:39:49.536Z" title="发表于 2022-09-02 13:39:49">2022-09-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/02/distributed-system/service_discovery/" title="对Service Discovery with router tier的思考"><img src="https://s2.loli.net/2022/09/02/IymaQWxA14lEPgO.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="对Service Discovery with router tier的思考"/></a><div class="content"><a class="title" href="/2022/09/02/distributed-system/service_discovery/" title="对Service Discovery with router tier的思考">对Service Discovery with router tier的思考</a><time datetime="2022-09-02T02:47:26.780Z" title="发表于 2022-09-02 10:47:26">2022-09-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/24/cos333/regex/" title="COS333 assignment1 -- glob"><img src="https://s2.loli.net/2022/08/24/JugsZfl9qcHMSFt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="COS333 assignment1 -- glob"/></a><div class="content"><a class="title" href="/2022/08/24/cos333/regex/" title="COS333 assignment1 -- glob">COS333 assignment1 -- glob</a><time datetime="2022-08-24T05:02:10.935Z" title="发表于 2022-08-24 13:02:10">2022-08-24</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">5</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/DP/"><span class="card-category-list-name">DP</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/greedy/"><span class="card-category-list-name">greedy</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">21</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/OOP/"><span class="card-category-list-name">OOP</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/class/"><span class="card-category-list-name">class</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/concurrent/"><span class="card-category-list-name">concurrent</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/declaration/"><span class="card-category-list-name">declaration</span><span class="card-category-list-count">2</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 1.1em; color: #999">Algorithm</a> <a href="/tags/BFS/" style="font-size: 1.1em; color: #999">BFS</a> <a href="/tags/Balanced-Search-tree/" style="font-size: 1.16em; color: #999b9e">Balanced Search tree</a> <a href="/tags/Big-Five/" style="font-size: 1.1em; color: #999">Big Five</a> <a href="/tags/C/" style="font-size: 1.5em; color: #99a9bf">C++</a> <a href="/tags/DFS/" style="font-size: 1.1em; color: #999">DFS</a> <a href="/tags/Data-structure/" style="font-size: 1.1em; color: #999">Data structure</a> <a href="/tags/Database/" style="font-size: 1.1em; color: #999">Database</a> <a href="/tags/Effective-C/" style="font-size: 1.33em; color: #99a2af">Effective C++</a> <a href="/tags/HDOJ/" style="font-size: 1.21em; color: #999ea4">HDOJ</a> <a href="/tags/Index/" style="font-size: 1.1em; color: #999">Index</a> <a href="/tags/OOP/" style="font-size: 1.1em; color: #999">OOP</a> <a href="/tags/STL/" style="font-size: 1.1em; color: #999">STL</a> <a href="/tags/Search-binary-Tree/" style="font-size: 1.1em; color: #999">Search binary Tree</a> <a href="/tags/Single-linked-list/" style="font-size: 1.1em; color: #999">Single linked list</a> <a href="/tags/algorithm/" style="font-size: 1.27em; color: #99a0a9">algorithm</a> <a href="/tags/base64/" style="font-size: 1.1em; color: #999">base64</a> <a href="/tags/bustub/" style="font-size: 1.1em; color: #999">bustub</a> <a href="/tags/butterfly/" style="font-size: 1.1em; color: #999">butterfly</a> <a href="/tags/concurrent/" style="font-size: 1.21em; color: #999ea4">concurrent</a> <a href="/tags/cos333/" style="font-size: 1.16em; color: #999b9e">cos333</a> <a href="/tags/cpp/" style="font-size: 1.1em; color: #999">cpp</a> <a href="/tags/csapp/" style="font-size: 1.1em; color: #999">csapp</a> <a href="/tags/declaration/" style="font-size: 1.16em; color: #999b9e">declaration</a> <a href="/tags/distributed-system/" style="font-size: 1.21em; color: #999ea4">distributed-system</a> <a href="/tags/dynamic-programming/" style="font-size: 1.21em; color: #999ea4">dynamic programming</a> <a href="/tags/encoding-format/" style="font-size: 1.1em; color: #999">encoding format</a> <a href="/tags/glob/" style="font-size: 1.1em; color: #999">glob</a> <a href="/tags/graph/" style="font-size: 1.1em; color: #999">graph</a> <a href="/tags/greedy-algorithm/" style="font-size: 1.16em; color: #999b9e">greedy algorithm</a> <a href="/tags/hexo/" style="font-size: 1.1em; color: #999">hexo</a> <a href="/tags/kanon/" style="font-size: 1.39em; color: #99a4b4">kanon</a> <a href="/tags/library/" style="font-size: 1.1em; color: #999">library</a> <a href="/tags/linking/" style="font-size: 1.1em; color: #999">linking</a> <a href="/tags/mmkv/" style="font-size: 1.1em; color: #999">mmkv</a> <a href="/tags/namespace/" style="font-size: 1.16em; color: #999b9e">namespace</a> <a href="/tags/network/" style="font-size: 1.44em; color: #99a7ba">network</a> <a href="/tags/os/" style="font-size: 1.16em; color: #999b9e">os</a> <a href="/tags/parse-string/" style="font-size: 1.1em; color: #999">parse string</a> <a href="/tags/process/" style="font-size: 1.16em; color: #999b9e">process</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">95</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">107.8k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-09-06T16:47:51.104Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2022/08/18/XNnMbxd95EmwReV.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Conzxy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到Conzxy's blog，希望内容对你有所启发!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["先问是不是，再问为什么","在考虑周全之前先考虑去尝试做"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '先问是不是，再问为什么'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>