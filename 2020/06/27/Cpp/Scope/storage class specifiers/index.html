<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>存储类说明符 | Conzxy's blog</title><meta name="keywords" content="C++,declaration"><meta name="author" content="Conzxy"><meta name="copyright" content="Conzxy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Storage class specifiers一个名字除了拥有它的作用域，还有两个重要性质：storage duration和linkage。">
<meta property="og:type" content="article">
<meta property="og:title" content="存储类说明符">
<meta property="og:url" content="http://yoursite.com/2020/06/27/Cpp/Scope/storage%20class%20specifiers/index.html">
<meta property="og:site_name" content="Conzxy&#39;s blog">
<meta property="og:description" content="Storage class specifiers一个名字除了拥有它的作用域，还有两个重要性质：storage duration和linkage。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png">
<meta property="article:published_time" content="2020-06-27T14:21:49.630Z">
<meta property="article:modified_time" content="2020-06-30T13:49:52.872Z">
<meta property="article:author" content="Conzxy">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="declaration">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png"><link rel="shortcut icon" href="https://s2.loli.net/2022/08/11/GzwcjJWagFYDrqA.png"><link rel="canonical" href="http://yoursite.com/2020/06/27/Cpp/Scope/storage%20class%20specifiers/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '存储类说明符',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-06-30 21:49:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw 首页"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw 归档"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw 标签"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw 分类"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Conzxy's blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw 首页"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw 归档"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw 标签"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw 分类"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">存储类说明符</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-27T14:21:49.630Z" title="发表于 2020-06-27 22:21:49">2020-06-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-30T13:49:52.872Z" title="更新于 2020-06-30 21:49:52">2020-06-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/">C++</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/declaration/">declaration</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="存储类说明符"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/06/27/Cpp/Scope/storage%20class%20specifiers/#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Storage-class-specifiers"><a href="#Storage-class-specifiers" class="headerlink" title="Storage class specifiers"></a>Storage class specifiers</h1><p>一个名字除了拥有它的作用域，还有两个重要性质：storage duration和linkage。<br><span id="more"></span></p>
<h2 id="说明符种类"><a href="#说明符种类" class="headerlink" title="说明符种类"></a>说明符种类</h2><p>存储类说明符可分为：</p>
<ul>
<li>auto</li>
<li>register</li>
<li>static</li>
<li>extern</li>
<li>thread_local</li>
<li>mutable</li>
</ul>
<p>auto C++11已经改变用法了（类型判断）。<br>registerC++17已废除，线程暂不讨论（暂时还没了解(′д｀ )…彡…彡）。<br>mutable对于存储期和链接属性都是无影响的。其作用本来也不是体现在这里。<br>因此我们只讨论两个修饰符：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>specifier</th>
<th>storage duration</th>
<th>linkage</th>
</tr>
</thead>
<tbody>
<tr>
<td>static</td>
<td>static or thread</td>
<td>internal</td>
<td></td>
</tr>
<tr>
<td>extern</td>
<td>static or thread</td>
<td>external</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<h2 id="storage-duration"><a href="#storage-duration" class="headerlink" title="storage duration"></a>storage duration</h2><p>把线程的存储期去掉，有三种存储期：</p>
<ul>
<li>automatic</li>
<li>static</li>
<li>dynamic</li>
</ul>
<h3 id="automatic-storage-duration"><a href="#automatic-storage-duration" class="headerlink" title="automatic storage duration"></a>automatic storage duration</h3><blockquote>
<p>automatic storage duration. The storage for the object is <strong>allocated at the beginning of the enclosing code block and deallocated at the end.</strong> All local objects have this storage duration, except those declared static, extern or thread_local.</p>
</blockquote>
<p>automatic存储期是针对block内创建的局部对象而言的，当block结束就会自动回收原来分配的资源（这里回收的是stack内存）</p>
<h3 id="static-storage-duration"><a href="#static-storage-duration" class="headerlink" title="static storage duration"></a>static storage duration</h3><blockquote>
<p>static storage duration. The storage for the object is <strong>allocated when the program begins and deallocated when the program ends.</strong> Only one instance of the object exists. <strong>All objects declared at namespace scope (including global namespace) have this storage duration, plus those declared with static or extern.</strong></p>
</blockquote>
<p>static存储期是程序开始创建直至程序结束的，整个程序中该对象只有一份实体（所以指定初值后再次指定初值无效）。<br>定义在namespace（包括global）中的对象都具有static存储期，显式static或是extern声明的对象也是如此。</p>
<h3 id="dynamic-storage-duration"><a href="#dynamic-storage-duration" class="headerlink" title="dynamic storage duration"></a>dynamic storage duration</h3><blockquote>
<p>dynamic storage duration. The storage for the object is <strong>allocated and deallocated per request by using dynamic memory allocation functions</strong>.</p>
</blockquote>
<p>dynamic存储期是通过new和delete这些运算符或一些动态分配的函数（比如malloc和free）进行的，由自己根据需求进行分配和回收（如果设置了引用计数，则可实现自动回收）。</p>
<h2 id="linkage"><a href="#linkage" class="headerlink" title="linkage"></a>linkage</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote>
<p>A name that denotes object, reference, function, type, template, namespace, or value, may have linkage. If a name has linkage, <strong>it refers to the same entity as the same name introduced by a declaration in another scope.</strong> If a variable, function, or another entity with the same name is declared in several scopes, but does not have sufficient linkage, then several instances of the entity are generated.</p>
</blockquote>
<p>linkage就是为了告诉链接器（linker）这个名字在处理翻译单元（translation unit）时引用它是否可见。</p>
<h3 id="no-linkage"><a href="#no-linkage" class="headerlink" title="no linkage"></a>no linkage</h3><blockquote>
<p>The name can be referred to only from the scope it is in.</p>
</blockquote>
<p>Any of the following names declared at <code>block</code> scope have no linkage:</p>
<blockquote>
<ul>
<li>variables that aren’t explicitly declared extern (regardless of the static modifier);</li>
<li>local classes and their member functions;</li>
<li>other names declared at block scope such as typedefs, enumerations, and enumerators.</li>
</ul>
<p>Names not specified with external, module, (since C++20) or internal linkage also have no linkage, regardless of which scope they are declared in.</p>
</blockquote>
<p>no linkage是针对block的声明的名字的，像变量（non-extern）、局部类（及其成员）和其他在block中的名字都没有链接，被限制了当前作用域。这个没有太多可以展开了，接下来两个才是重点。</p>
<h3 id="internal-linkage"><a href="#internal-linkage" class="headerlink" title="internal linkage"></a>internal linkage</h3><blockquote>
<p>The name can be referred to from <strong>all scopes in the current translation unit</strong>.</p>
</blockquote>
<p>Any of the following names declared at <code>namespace</code> scope have internal linkage:</p>
<blockquote>
<ul>
<li>variables, variable templates (since C++14), functions, or function templates <code>declared static</code>;</li>
<li><code>non-volatile</code> <code>non-template</code> (since C++14) <code>non-inline</code>(since C++17) <code>non-exported</code> (since C++20) <code>const-qualified</code> variables (including <code>constexpr</code>) that <strong>aren’t declared extern and aren’t previously declared to have external linkage</strong>;</li>
<li>data members of <code>anonymous unions</code>.</li>
</ul>
</blockquote>
<p>internal linkage针对namespace中声明的名字，像声明为static的变量和函数（包括模板）、未被声明为extern的const变量（包括constexpr）（=&gt;const默认为internal）等。internal linkage使这些名字被限制在了该名字所在的翻译单元，即无法被其他翻译单元所引用（single source file）。</p>
<blockquote>
<p>In addition, all names declared in unnamed namespace or a namespace within an unnamed namespace, even ones explicitly declared extern, have internal linkage.</p>
</blockquote>
<p>对于无名命名空间，本身自带static声明属性，即internal linkage，因此即使显式声明为extern也是无效的。<br>e.g</p>
<pre><code class="lang-cpp">namespace&#123;int variable=0;&#125;
//类似于
static int variable=0;
</code></pre>
<p>这里我们举一个例子来更为直观的认识一下internal的作用：</p>
<pre><code class="lang-cpp">header.h
static int variable=42;

function1.h
void function1();

function2.h
void function2();

function1.cpp
#include &quot;function1.h&quot;
void function()&#123;variable=10;&#125;

function2.cpp
#include &quot;function2.h&quot;
void function()&#123;variable=123;&#125;

main.cpp
#include &quot;header.h&quot;
#include &quot;function1.h&quot;
#include &quot;function2.h&quot;
#include &lt;iostream&gt;
int main()
&#123;
  function1();
  function2();
  std::cout&lt;&lt;variable&lt;&lt;std::endl; //print 42
&#125;
</code></pre>
<p>这里有三个翻译单元：</p>
<ul>
<li>function1.cpp</li>
<li>function2.cpp</li>
<li>main.cpp</li>
</ul>
<p>主函数中的function1和function2作用的都不是主函数所在翻译单元的variable，而是他们自己翻译单元的variable，internal linkage的情况下，每个翻译单元同名的被视为不同对象，相当于拷贝，因此是需要更多的内存开销的。</p>
<blockquote>
<p> In practice, this means that when you declare a symbol to have internal linkage in a header file, each translation unit you include this file in will get its <code>own unique copy</code> of that symbol. I.e. it will be as if you redefined each such symbol in every translation unit. For objects, this means that the compiler will literally allocate an entirely new, unique copy for each translation unit, which can obviously incur high memory costs.</p>
</blockquote>
<h3 id="external-linkage"><a href="#external-linkage" class="headerlink" title="external linkage"></a>external linkage</h3><blockquote>
<p>The name can be referred to from the scopes in the other translation units.</p>
</blockquote>
<p>Except as noted below, any of the following names declared at namespace scope have external linkage:</p>
<blockquote>
<ul>
<li>variables and functions not listed above (that is, functions <code>not declared static</code>, namespace-scope <code>non-const</code> variables not declared static, and any variables declared extern);</li>
<li><code>enumerations</code>;</li>
<li>names of <code>classes</code>, their <code>member</code> functions, <code>static data members (const or not)</code>, <code>nested classes</code> and <code>enumerations</code>, and functions first introduced with <code>friend</code> declarations inside class bodies;</li>
<li>names of all <code>templates</code> not listed above (that is, not function templates declared static).</li>
</ul>
</blockquote>
<p>external linkage与internal linkage一样也是针对namespace的，function只要不是static声明，都是extern（默认的），namespace中的const变量是internal，而non-const变量是external（non-static）。当然，显式声明的extern变量具有external linkage。<br>对于一个类，其成员函数、static数据成员（无论const）、嵌套类（看做member class）、友元声明都默认为extern。<br>模板同理，模板函数只要没被显式声明为static即可。</p>
<blockquote>
<p>Any of the following names first declared at block scope have external linkage:</p>
<ul>
<li>names of variables declared extern;</li>
<li>names of functions.</li>
</ul>
</blockquote>
<p>在block中第一次声明的extern变量和函数（函数是默认extern）是具有external linkage的（不太了解这种情况，暂未遇到过）</p>
<blockquote>
<p>In practice, this means that you must define such a symbol in a place where it will end up in one and only one translation unit, typically an implementation file (.c/.cpp), such that it has only one visible definition.</p>
</blockquote>
<p>实际上，我们一般将extern声明放在头文件中，而定义放在实现文件中，同时注意我们只在其中一个翻译单元定义唯一的一份，如果在多个翻译单元中重复定义，到时候链接器会找到两份定义，这违反了单一定义原则（one-definition-rule）。更进一步的来讲，如果重复声明而不定义，尽管不会有单一声明原则（声明是可以重复的），但是这是链接器找到了声明且连接不上定义，会给出undefined error，声明与定义是绑定的。</p>
<pre><code class="lang-cpp">extern int x;
int x;
</code></pre>
<p>const global variable默认是internal，non-const global variable默认是extern，但是上述两种声明并不一样，<br>实际上extern只是单纯的声明而已，而int x声明并定义了，它可以等效为：</p>
<pre><code class="lang-cpp">extern int x&#123;&#125;;
</code></pre>
<p>当然，如果是要加extern声明的话，是不需要初始化的，这破坏了extern的原意。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>稍微留意一下就会发现，storage duration对应三种内存：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>storage duration</th>
<th>memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>automatic</td>
<td>stack</td>
</tr>
<tr>
<td>static</td>
<td>static</td>
</tr>
<tr>
<td>dynamic</td>
<td>heap</td>
</tr>
</tbody>
</table>
</div>
<p>也就是说每个对象的存储期实际上就是对应其存储的内存类型。<br>这都很好理解。</p>
<hr>
<div class="table-container">
<table>
<thead>
<tr>
<th>linkage</th>
<th>scoped</th>
<th>specifier</th>
</tr>
</thead>
<tbody>
<tr>
<td>no</td>
<td>scope</td>
<td>/</td>
</tr>
<tr>
<td>internal</td>
<td>one TU</td>
<td>static</td>
</tr>
<tr>
<td>external</td>
<td>another TU</td>
<td>extern</td>
</tr>
</tbody>
</table>
</div>
<p>linkage有三种，第一种记住block就行了。<br>具有extern linkage的一般都是放在头文件里，以便#include该文件的所有翻译单元都可以引用与其他地方定义相同的名字。<br>而具有internal linkage的在每个翻译单元会生成一个独立且不同的对象。<br>(吐槽：对于这玩意还是得增长些见识可能理解更深，现在还是不够)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://yoursite.com">Conzxy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/06/27/Cpp/Scope/storage%20class%20specifiers/">http://yoursite.com/2020/06/27/Cpp/Scope/storage%20class%20specifiers/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Conzxy's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++</a><a class="post-meta__tags" href="/tags/declaration/">declaration</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/01/Effective%20Cpp/item%207/"><img class="prev-cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">item 7:Declare destructors virtual in polymorphic base classes</div></div></a></div><div class="next-post pull-right"><a href="/2020/06/27/Cpp/Scope/Scope%20Region/"><img class="next-cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">C与C++的作用域</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/06/27/Cpp/Scope/Scope%20Region/" title="C与C++的作用域"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-27</div><div class="title">C与C++的作用域</div></div></a></div><div><a href="/2021/01/21/Cppt/Directory/" title="C++ Templates reading note"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-21</div><div class="title">C++ Templates reading note</div></div></a></div><div><a href="/2020/06/25/Cpp/Big%20Five/assignment%20operator/" title="swap与copy(and move) assignment"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-25</div><div class="title">swap与copy(and move) assignment</div></div></a></div><div><a href="/2021/08/18/Cpp/Concurrent/destruct/" title="多线程的析构"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-18</div><div class="title">多线程的析构</div></div></a></div><div><a href="/2021/05/28/Cpp/Concurrent/quicksort/" title="Concurrent Sort"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-28</div><div class="title">Concurrent Sort</div></div></a></div><div><a href="/2021/12/20/Cpp/Concurrent/cond_var/" title="条件变量Question&amp;answer"><img class="cover" src="https://s2.loli.net/2022/08/11/cLoR4IHvwUBePAx.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-20</div><div class="title">条件变量Question&amp;answer</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/08/11/FL2oCbPv5MNiDgK.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Conzxy</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Conzxy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Conzxy" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Cpper，最近对分布式系统、编译器设计感兴趣</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Storage-class-specifiers"><span class="toc-number">1.</span> <span class="toc-text">Storage class specifiers</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E%E7%AC%A6%E7%A7%8D%E7%B1%BB"><span class="toc-number">1.1.</span> <span class="toc-text">说明符种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#storage-duration"><span class="toc-number">1.2.</span> <span class="toc-text">storage duration</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#automatic-storage-duration"><span class="toc-number">1.2.1.</span> <span class="toc-text">automatic storage duration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#static-storage-duration"><span class="toc-number">1.2.2.</span> <span class="toc-text">static storage duration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-storage-duration"><span class="toc-number">1.2.3.</span> <span class="toc-text">dynamic storage duration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linkage"><span class="toc-number">1.3.</span> <span class="toc-text">linkage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#no-linkage"><span class="toc-number">1.3.2.</span> <span class="toc-text">no linkage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internal-linkage"><span class="toc-number">1.3.3.</span> <span class="toc-text">internal linkage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#external-linkage"><span class="toc-number">1.3.4.</span> <span class="toc-text">external linkage</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/08/17/Cpp/modern/overload_para_type/" title="对于重载函数的参数类型声明的思考"><img src="https://s2.loli.net/2022/08/17/DpHUb4LXnZ5OQyA.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="对于重载函数的参数类型声明的思考"/></a><div class="content"><a class="title" href="/2022/08/17/Cpp/modern/overload_para_type/" title="对于重载函数的参数类型声明的思考">对于重载函数的参数类型声明的思考</a><time datetime="2022-08-17T08:53:08.179Z" title="发表于 2022-08-17 16:53:08">2022-08-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/17/Cpp/think/oom_bug/" title="对一次OOM bug的反思"><img src="https://s2.loli.net/2022/08/17/jIYEyaqKldZTswL.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="对一次OOM bug的反思"/></a><div class="content"><a class="title" href="/2022/08/17/Cpp/think/oom_bug/" title="对一次OOM bug的反思">对一次OOM bug的反思</a><time datetime="2022-08-17T08:41:04.579Z" title="发表于 2022-08-17 16:41:04">2022-08-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/17/Cpp/think/c++11_lambda_complete/" title="C++11实现C++14捕获列表变量初始化"><img src="https://s2.loli.net/2022/08/17/Cx7Lk1woBp6yVzY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++11实现C++14捕获列表变量初始化"/></a><div class="content"><a class="title" href="/2022/08/17/Cpp/think/c++11_lambda_complete/" title="C++11实现C++14捕获列表变量初始化">C++11实现C++14捕获列表变量初始化</a><time datetime="2022-08-17T03:10:45.187Z" title="发表于 2022-08-17 11:10:45">2022-08-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/17/Cpp/think/noncopyable/" title="对于引用语义和值语义以及移动语义的思考"><img src="https://s2.loli.net/2022/08/17/XQVT2s9ZW8INth7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="对于引用语义和值语义以及移动语义的思考"/></a><div class="content"><a class="title" href="/2022/08/17/Cpp/think/noncopyable/" title="对于引用语义和值语义以及移动语义的思考">对于引用语义和值语义以及移动语义的思考</a><time datetime="2022-08-17T03:10:31.657Z" title="发表于 2022-08-17 11:10:31">2022-08-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/12/mmkv/dist_arch/" title="mmkv分布式架构设想"><img src="https://s2.loli.net/2022/08/12/f4ykdUMHsEqJBSc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mmkv分布式架构设想"/></a><div class="content"><a class="title" href="/2022/08/12/mmkv/dist_arch/" title="mmkv分布式架构设想">mmkv分布式架构设想</a><time datetime="2022-08-12T02:04:58.842Z" title="发表于 2022-08-12 10:04:58">2022-08-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Conzxy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '777f04a5b126f26c2e07',
      clientSecret: '8f8dd09899f1d1d8f688e50ab6119b788982da7d',
      repo: 'Conzxy.github.io',
      owner: 'Conzxy',
      admin: ['Conzxy'],
      id: '86379531df0987b5de960be24bf5eda1',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>